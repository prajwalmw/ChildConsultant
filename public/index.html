<!DOCTYPE html>
<html lang="en">

<head>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="Pediatrician - provide the easy responsive free website templates. You can easily customize and make your own website for your startup business.">
  <meta name="keywords"
    content="bootstrap template, Responsive Template, Website Template, free website templates, free website template download ">
  <title>Nubee</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="css/animsition.min.css">
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/fontello.css">
  <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>

<body class="animsition">

  <script>
    // ✅ Your Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCyLCI_GOl9SWDLo2zhjMthLQFZ5sA3ddM",
      authDomain: "child-consultant.firebaseapp.com",
      projectId: "child-consultant",
      storageBucket: "child-consultant.appspot.com",
      messagingSenderId: "985386588549",
      appId: "1:985386588549:web:311ecd89cc7f6aa141ccec"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const auth = firebase.auth();
    const db = firebase.firestore();

    auth.onAuthStateChanged(user => {
      var profileImg = document.getElementById('profile-img');
      var navigation = document.getElementById('navigation');
      
      if (!user) {
        // Not logged in → redirect to login page
        window.location.href = 'login.html';
      } else {
        // Logged in: Set profile image and fetch role
        if (profileImg) {
            profileImg.src = user.photoURL || 'images/default-profile.png'; // Use a fallback image
        }
        
        // --- 🔑 New Logic: Fetch User Role and Update Menu ---
        db.collection('users').doc(user.uid).get()
          .then(doc => {
            let menuHtml = '';

            if (doc.exists) {
              const role = doc.data().role;
              if (navigation && role) {
                if (role === 'admin') {
                  menuHtml = '<li><a href="admin/admin_dashboard.html" title="Admin Dashboard" class="animsition-link">Admin Dashboard</a></li>';
                } else if (role === 'doctor') {
                  menuHtml = '<li><a href="doctor/doctor_portal.html" title="Doctor Portal" class="animsition-link">Doctor Portal</a></li>';
                } else {
                  // For 'parent' or default role
                  menuHtml = '<li><a href="dashboard/dashboard.html" title="Dashboard" class="animsition-link">Dashboard</a></li>';
                }
              }
            } else {
                // Fallback to parent dashboard if user document is missing
                menuHtml = '<li><a href="dashboard/dashboard.html" title="Dashboard" class="animsition-link">Dashboard</a></li>';
            }
            
            // Find the position after "Home" (first <li>)
            const homeMenuItem = navigation.querySelector('ul > li:first-child');
            if (homeMenuItem) {
                // Insert the new menu item right after Home
                homeMenuItem.insertAdjacentHTML('afterend', menuHtml);
            } 
          })
          .catch(error => {
            console.error("Error fetching user role:", error);
            // Fallback: If network fails, still try to show a basic dashboard link
            const navigation = document.getElementById('navigation');
            const homeMenuItem = navigation?.querySelector('ul > li:first-child');
            if (homeMenuItem) {
              homeMenuItem.insertAdjacentHTML('afterend', '<li><a href="dashboard/dashboard.html" title="Dashboard" class="animsition-link">Dashboard</a></li>');
            }
          });
        // --- End New Logic ---
      }
    });
  </script>

  <div id="animsition-box" class="animsition-box">

    <div class="hero-section">
      <div class="container">
        <div class="top-bar">
          <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
              <p class="mail-text">Welcome to our clinic care website</p>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-6 text-right">
              <div class="top-nav hidden-xs"><span>Make An Appointment </span> <span><a href="#"><i
                      class="fa fa-search"></i></a></span> </div>
            </div>
          </div>
        </div>
      </div>
      <div class="header">
        <div class="container">
          <div class="row">
            <div class="col-md-3 col-sm-6 col-xs-6">
              <div class="logo"> <a href="index.html"><img src="images/logo.png" alt=""></a> </div>
            </div>
            <div class="col-md-9 col-sm-12">
              <div class="navigation pull-right" id="navigation">
                <ul>
                  <li class="active"><a href="index.html" title="Home" class="animsition-link">Home</a></li>
                  <li><a href="blog-default.html" title="Blog" class="animsition-link">Blog Default</a>
                    <ul>
                      <li><a href="blog-default.html" title="Blog" class="animsition-link">Blog Default</a></li>
                      <li><a href="blog-single.html" title="Blog Single" class="animsition-link">Blog Single</a></li>
                    </ul>
                  </li>
                  <li class="profile-menu" style="position:relative;">
                    <a href="#" id="profile-icon" style="padding:0 10px;">
                      <img id="profile-img" src="" alt="Profile" style="width:32px;height:32px;border-radius:50%;object-fit:cover;display:inline-block;vertical-align:middle;">
                    </a>
                    <ul id="profile-submenu" style="display:none; position:absolute; right:0; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.15); min-width:120px; z-index:1000;">
                      <li><a href="#" id="logout-btn" style="color:#333;">Logout</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="col-lg-5 col-md-6 col-sm-12 hidden-xs">
            <div class="hero-caption">
              <h1 class="hero-title">We Will Take Care of <br>
                Your Child</h1>
              <h3 class="hero-text">From Childcare Specialist</h3>
              <a href="service-list.html" class="btn btn-white">View Services</a>
            </div>
            </div>
        </div>
      </div>
    </div>
    <div class="space-medium">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="section-title">
              <h1>Childcare Speciality Services</h1>
            </div>
          </div>
        </div>
        <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
          <div class="service-block mb30">
            <div class="service-img mb30"> <a href="service-list.html" class="imghover"><img src="images/service-1.jpg"
                  class="img-responsive" alt="Pediatrician Website Template"></a> </div>
            <div class="service-content mb30">
              <h2 class="service-title mb20"><a href="service-list.html" class="title">General Paediatrics</a></h2>
              <p>Donec interdum enim ac lectus amet ectetur luctu Integer neqlorem.</p>
              <a href="service-list.html" class="btn-link">read more</a>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
          <div class="service-block mb30">
            <div class="service-img mb30"> <a href="service-list.html" class="imghover"><img src="images/service-2.jpg"
                  class="img-responsive" alt="Pediatrician Website Template"></a> </div>
            <div class="service-content mb30">
              <h2 class="service-title mb20"><a href="service-list.html" class="title">Cardiology Paediatrics</a></h2>
              <p>Interdum fringilla ultrices offa rem sit amet utnsequat congue lorem.</p>
              <a href="service-list.html" class="btn-link">read more</a>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
          <div class="service-block mb30">
            <div class="service-img mb30"> <a href="service-list.html" class="imghover"><img src="images/service-3.jpg"
                  class="img-responsive" alt="Pediatrician Website Template"></a> </div>
            <div class="service-content mb30">
              <h2 class="service-title mb20"><a href="service-list.html" class="title">Dermatology Paediatrics</a></h2>
              <p>Pellentesque in massa aliquam agna porttitor facilisi id nibhone.</p>
              <a href="service-list.html" class="btn-link">read more</a>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
          <div class="cta-block pinside30">
            <h1 class="cta-title">Call For An Appointment</h1>
            <div class="hours"> <span class="text-caps">Monday- Friday</span>
              <h3 class="text-white">8:30am - 5:00pm</h3>
              <span class="text-caps">Saturday</span>
              <h3 class="text-white">9:00am - 2:00pm</h3>
            </div>
            <div class="call-block">
              <h3 class="call-no">1-800-503-4678</h3>
              <a href="contact.html" class="btn btn-white">Make Appointment</a>
            </div>
          </div>
        </div>
      </div>
        </div>
    </div>
    <div class="space-medium bg-light">
      <div class="container">
      <div class="row">
        <div class="col-lg-offset-2 col-lg-8 col-md-offset-2 col-md-8 col-sm-12 col-xs-12">
          <div class="lead italic mb40 text-center">
            <p class="about-text">Over 10 years of experience from working in India. <br>
              Certificate of completion of training in <strong>Paediatric Neurology from the india</strong> <br>
              consultant paediatric child care clinic.</p>
          </div>
          <div class="text-center mb80"> <a href="#" class="btn btn-default">about us</a> </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
          <div class="doctor-block bg-white pinside30 outline mb30">
            <div class="doctor-img mb30"> <img src="images/doctor.jpg" class="img-responsive"
                alt="Pediatrician Website Template"> </div>
            <div class="doctor-info">
              <h3>Dr. Martha Carlson</h3>
              <div class="doctor-meta mb30">
                <p>Paediatric Neurologist <br>
                  MBBS, DCH , MD </p>
              </div>
              <div class="icon"> <i class="icon-1x icon-phone-call icon-default"></i> <span
                  class="doctor-contact">+91-123-456-789</span></div>
              <div class="icon"><i class="icon-1x  icon-envelope icon-default"></i> <span
                  class="doctor-contact">dr_martha@gmail.com</span> </div>
            </div>
            <div class="doctor-detail">
              <h3>About Dr. Martha</h3>
              <p>Integer lacinia rhoncus bibendum enean sedmpor duiveldasunce mus dolorusce sem velitcondi mentum
                vitalaoreer misemuisque pretium facilsis laoreetn auctor urna semn molesti.</p>
              <p>Integer lacinia rhoncus bibendum enean sedmpor duiveldasunce mus dolorusce sem velitcondi mentum
                vitalaoreer mise.</p>
            </div>
          </div>
        </div>
        <div class="col-lg-offset-1 col-lg-5 col-md-offset-1 col-md-5 col-sm-12 col-xs-12">
          <div class="why-choose-block">
            <h2>Why Choose Childcare?</h2>
            <p class="mb30">Duis quis fermentum ipsum ulum odio nisinrdum lorem fringilla fermentum ipsum ultrices one.
              equat congue metus conse.</p>
            <div class="feature-left mb30">
              <div class="feature-icon"> <i class="icon-2x  icon-hospital icon-primary"></i></div>
              <div class="feature-content">
                <h3>Well Baby Clinic</h3>
                <p>Duis quis fermentum ipsum ulum odio nisinrdum lorem fringilla fermentum ipsum ultrices one.</p>
              </div>
            </div>
            <div class="feature-left mb30">
              <div class="feature-icon"> <i class="icon-2x  icon-clock icon-primary"></i></div>
              <div class="feature-content">
                <h3>24X7 on Call Services</h3>
                <p>Integer lacinia rhoncus bibendum enean sed tempor onr duivel sodales esuncac maxiousce semes. </p>
              </div>
            </div>
            <div class="feature-left">
              <div class="feature-icon"> <i class="icon-2x  icon-favorite icon-primary"></i></div>
              <div class="feature-content">
                <h3>Adolescent Consulting</h3>
                <p>Cras lobortis volutpat porliquam ac tristique neueasellus eratsed eros posuere ultricesn.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
      </div>
    <div class="space-medium">
      <div class="container">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="section-title text-center">
            <h1>What Patients Say About Us</h1>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="testimonial-block bg-light pinside30 mb30">
            <div class="quote-box">
              <div class="testimonial-icon bg-default"> <i class="icon-left-quote text-white"></i> </div>
            </div>
            <div class="testimonial-content mb30">
              <p class=" testimonial-text">“I brought my 3-year-old daughter in for a well-child visit. She loved the
                office and Dr. John sinha! Thanks so much for making her visit a great one!”</p>
              <h2 class="testimonial-name"> - Nettie Drummond </h2>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
          <div class="testimonial-block bg-light pinside30 mb30">
            <div class="quote-box">
              <div class="testimonial-icon bg-default"> <i class="icon-left-quote text-white"></i> </div>
            </div>
            <div class="testimonial-content mb30">
              <p class=" testimonial-text">“Dr John sinha, He is very personable, cares about his patients I have been
                so happy with the care we receive It is a wonderful environment”</p>
              <h2 class="testimonial-name">- Edward Hendrix</h2>
            </div>
          </div>
        </div>
      </div>
    </div>
      </div>
    <div class="space-medium bg-light">
      <div class="container">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="section-title text-center">
            <h1>Child Care Latest News</h1>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
          <div class="post-block mb30 outline">
            <div class="meta-box bg-default">
              <h2 class="meta-date">07 OCT</h2>
            </div>
            <div class="post-img"> <a href="blog-default.html" class="imghover"><img src="images/blog-1.jpg"
                  class="img-responsive" alt="Pediatrician Website Template"></a> </div>
            <div class="post-content pinside30 bg-white">
              <h2 class="post-title"><a href="blog-default.html">3 Reasons Moms Love Kids First Pediatric Clinic</a>
              </h2>
              <div class="post-meta mb20"> <span class="meta-comment"><i
                    class="icon-primary icon-1x icon-communication-4"></i> 06 <a href="#">Comments</a></span> </div>
              <p class="mb30">Morbi luctus bibendum lorem eget umsan quam dictu am tellus id congue loremsite vestibulum
                egeavida.</p>
              <a href="blog-default.html" class="btn btn-default">read more</a>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
          <div class="post-block mb30 outline">
            <div class="meta-box bg-default">
              <h2 class="meta-date">15 OCT</h2>
            </div>
            <div class="post-img"> <a href="blog-default.html" class="imghover"><img src="images/blog-2.jpg"
                  class="img-responsive" alt="Pediatrician Website Template"></a> </div>
            <div class="post-content pinside30 bg-white">
              <h2 class="post-title"><a href="blog-default.html">Vaccination Reminder For Your Baby</a></h2>
              <div class="post-meta mb20"> <span class="meta-comment"><i
                    class="icon-primary icon-1x icon-communication-4"></i> 10 <a href="#">Comments</a></span> </div>
              <p class="mb30">Nteger pretium euismod accums raesent venenatis dolor sit commod ocongue lore metus
                consequat nunitnisia.</p>
              <a href="blog-default.html" class="btn btn-default">read more</a>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
          <div class="post-block mb30 outline">
            <div class="meta-box bg-default">
              <h2 class="meta-date">22 OCT</h2>
            </div>
            <div class="post-img"> <a href="blog-default.html" class="imghover"><img src="images/blog-3.jpg"
                  class="img-responsive" alt="Pediatrician Website Template"></a> </div>
            <div class="post-content pinside30 bg-white">
              <h2 class="post-title"><a href="blog-default.html">Here are a Few Things That Set Des Moines Pediatric</a>
              </h2>
              <div class="post-meta mb20"> <span class="meta-comment"><i
                    class="icon-primary icon-1x icon-communication-4"></i> 08 <a href="#">Comments</a></span> </div>
              <p class="mb30">Faucibus tortor exsed orcuis cursus lorem nuncios quam a ultricies velit dignissimid
                mdignissimid maecenas ante dolor.</p>
              <a href="blog-default.html" class="btn btn-default">read more</a>
            </div>
          </div>
        </div>
      </div>
    </div>
      </div>
    <section id="contact-form">
      <div class="form-container">
        <h3>Get in Touch</h3>
        <form id="inquiryForm">
          <div class="form-group">
            <input type="text" id="nameInput" class="form-control" placeholder="Your Name" required>
          </div>
          <div class="form-group">
            <input type="tel" id="mobileInput" class="form-control" placeholder="Mobile Number" pattern="[0-9]{10}"
              required>
          </div>
          <div class="form-group">
            <input type="email" id="emailInput" class="form-control" placeholder="Email Address" required>
          </div>
          <div class="form-group">
            <textarea id="reasonInput" class="form-control" rows="8" placeholder="Reason for Reaching Out"
              required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </div>
    </section>

    <div class="footer space-medium">
      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
            <div class="footer-widget mb30">
              <h3 class="footer-title">Specialist</h3>
              <ul class="listnone">
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="#">Adolescent Medicine</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="#">Child Abuse Pediatries</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="#">Pediatric Allergy &amp;
                    Immunology</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="#">Pediatric Cardiology</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="#">Pediatric Critical Care</a></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
            <div class="footer-widget mb30">
              <h3 class="footer-title">For Patients</h3>
              <ul class="listnone">
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="index.html">Home</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="service-list.html">Services</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="blog-default.html">Blog</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="contact.html">Contactus</a></li>
                <li><i class="icon icon-default icon-1x icon-next-11"></i> <a href="testimonial.html">Testimonials</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-lg-offset-1 col-lg-6 col-md-offset-1 col-md-6 col-sm-12 col-xs-12">
            <div class="footer-widget mb30">
              <h3 class="footer-title">News Letter Sign Up</h3>
              <p class="mb20">Enter your email address below to receive our monthely fun-filled newsletter.</p>
              <div class="row">
                <div class="col-md-8">
                  <input type="text" class="form-control" placeholder="Enter you email here">
                </div>
                <div class="col-md-4"> <a href="#" class="btn btn-primary">SUBSCRIBE</a></div>
              </div>
            </div>
            <div class="footer-social"> <a href="#"><i class="fa fa-twitter"></i></a> <a href="#" class="active"><i
                  class="fa fa-facebook"></i> </a> <a href="#"> <i class="fa fa-google-plus"></i> </a> <a href="#"> <i
                  class="fa fa-pinterest"></i> </a> <a href="#"> <i class="fa fa-envelope"></i> </a> </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tiny-footer">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <p>Copyrights@2017 | All Rights Reserve</p>
          </div>
        </div>
      </div>
    </div>
    <a href="#0" class="cd-top" title="Go to top">Top</a>
  
  </div> <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/menumaker.js"></script>
  <script type="text/javascript" src="js/jquery.sticky.js"></script>
  <script type="text/javascript" src="js/sticky-header.js"></script>
  <script type="text/javascript" src="js/animsition.js"></script>
  <script type="text/javascript" src="js/animsition-script.js"></script>
  <script src="js/back-to-top.js" type="text/javascript"></script>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    // Initialize EmailJS
    (function() {
      emailjs.init("dtuCgQmPCHjK7J9BA");
    })();

    // Reference the form only once
    const inquiryForm = document.getElementById("inquiryForm");
    if (inquiryForm) {
      inquiryForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const name = document.getElementById("nameInput")?.value.trim() || "";
        const mobile = document.getElementById("mobileInput")?.value.trim() || "";
        const email = document.getElementById("emailInput")?.value.trim() || "";
        const reason = document.getElementById("reasonInput")?.value.trim() || "";

        if (!name || !mobile || !email || !reason) {
          alert("Please fill in all fields!");
          return;
        }

        const submitBtn = inquiryForm.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.innerText = "Submitting...";

        let firestoreSuccess = false;
        let emailSuccess = false;

        // Save to Firestore
        try {
          // Use the global db object initialized earlier
          await db.collection("inquiries").add({
            name,
            mobile,
            email,
            reason,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
          });
          firestoreSuccess = true;
        } catch (error) {
          console.error("Error adding inquiry to Firestore:", error);
        }

        // Send Email via EmailJS
        try {
          await emailjs.send("service_frugd33", "template_yqstobb", {
            name,
            email,
            phone: mobile,
            message: reason
          });
          emailSuccess = true;
          console.log("✅ Email notification sent!");
        } catch (err) {
          console.error("❌ EmailJS error:", err);
        }

        if (firestoreSuccess && emailSuccess) {
          inquiryForm.reset();
          submitBtn.disabled = false;
          submitBtn.innerText = "Submit";
          alert("✅ Thank you! We’ll contact you soon.");
        } else {
          submitBtn.disabled = false;
          submitBtn.innerText = "Submit";
          alert("⚠️ Error submitting form. Please try again later.");
        }
      });
    } else {
      console.warn("inquiryForm not found on this page.");
    }
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var profileIcon = document.getElementById('profile-icon');
      var profileSubmenu = document.getElementById('profile-submenu');
      if (profileIcon && profileSubmenu) {
        profileIcon.addEventListener('click', function(e) {
          e.preventDefault();
          // Toggle display
          profileSubmenu.style.display = (profileSubmenu.style.display === 'block') ? 'none' : 'block';
        });
        // Close menu if clicking outside
        document.addEventListener('click', function(e) {
          if (!profileIcon.contains(e.target) && !profileSubmenu.contains(e.target)) {
            profileSubmenu.style.display = 'none';
          }
        });
      }
      var logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function(e) {
          e.preventDefault();
          firebase.auth().signOut().then(function() {
            // Redirection is handled by the onAuthStateChanged listener at the top
            window.location.href = 'login.html';
          }).catch(function(error) {
             console.error("Logout Error:", error);
             alert("Logout failed. Please try again.");
          });
        });
      }
    });
  </script>
</body>
</html>